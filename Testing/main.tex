\documentclass[main.tex]{subfiles}

\begin{document}
\chapter{Testing}
\chaplabel{testing}
Tests were conducted to ensure that the each subsystem was functioning correctly. Quad bike testing included initial testing of electronic components with subsequent stages added for total system integration to ensure that the autonomous navigation objective was complete.
(\textcolor{red}{Need to explain testing for GPR and metal detector and the integration of systems testing})

\section{Quad bike}
Preliminary testing of the quad bike subsystems were required to determine their working range, functionalities and integration. The systems tested were the brakes, steering, throttle, gear selector, wheel encoder, and positioning system. Additional safety systems were also tested to ensure they functioned as intended.
The quad bike subsystems, such as gears, brakes, throttle and steering were initially tested in order to ensure their functionality after electronic component upgrades and determine their relevant state conditions and values. The relevant test cases were documented in separate files (\textcolor{red}{REFER TO APPENDIX??}).

\subsection{Brake testing}
The brakes were required to control the quad bike speed as well as to bring the platform to a complete stop when commanded or in the case of an emergency. This requires accurate knowledge of the brake position for the varying brake intensities. The maximum brake intensity was chosen as the point where the wheels were unable to be turned by hand. This was found through small 5 percent increments in the actuator extension until the wheels were unable to rotate. The time required for actuator to go from nill brake to maximum was \textcolor{red}{MEASURED TO BE 3 SECONDS}. This coupled with a reduction in throttle would ensure that the quad bike is able to stop in the required distance of 60cm. \textcolor{red}{THIS LAST SENTENCE IS THE ACTUAL TEST THAT WE NEED TO DO - NOT COMPLETE YET}

\subsection{Gear testing}
The ability to control what gear the quad bike is in was essential to the control and navigation of the project. 36 testing cases were identified for the gear actuator setup. The actuator could lie in one of nine possible positions which were identified based on the system set-up and had three final positions, reverse, neutral and forwards as well as a null option for no actuator movement. \figref{gearTruthTable} shows the final truth table.

\textcolor{red}{TABLE HERE}

The truth table indicates the gear selector code has full completion of the testing cases. The gear actuator should not move when the quad bike is in motion or when the throttle is engaged. A check in the software was implemented to achieve this. \textcolor{red}{DO WE NEED MORE ON THIS?}

\subsection{Steering}
The steering of the quad bike was achieved through the use of a stepper motor. Upon power up, the position of the wheels would be the zero position and movement to the left or right dictated by the angle sent to the stepper motor. From the user manual for the quad bike the lock out angle for the steering was \textcolor{red}{24 degrees NEED TO CHECK}, a limit for the steering angle was placed at 23 degrees to ensure no hardware was damaged. 

Initial tests found that when the quad bike was on the support stand with the wheels free, the steering behaved as expected. However, when a resistive load was applied in the direction of the steering angle, the stepper motor would stop and reset. This would result in a incomplete steering angle as well as a new off centre zero position being selected by the stepper motor.  It was found that the required power for the stepper motor to operate to the required torque was 440W whereas the power supply in the quad bike was only able to supply 44W. Replacement of the power supply with one of the correct power requirements resulted in steering angle control under operational loads.

The accurate turning radius for the platform was required for the navigation software. The quad bike was allowed to travel forward from a marked position with the steering at full lock. Once a full circle was complete, the quad bike was turned off. The turn radius was measured to be 2.7m. This was within the turning circle range decided upon in the navigation software.

\textcolor{red}{steering tests more?}

\subsection{Throttle}
The throttle is controlled via a rotational servo. Initial approximation of the throttle travel had the servo with zero throttle and maximum throttle at positions XX and XX respectively. With the engine warmed up, incremental increases resulted in an actual throttle response range to be calculated. Due to the circular sweep of the servo arm and some cable play. the minimum throttle position before a throttle response was found to be XX. a maximum throttle position of XX was chosen for the servo as the engine revved very easily and wide open throttle would never be required for the chosen operating scenario.  

\subsection{Whole quad bike system test}


\subsection{Testing navigation on the quad bike}
The virtual platform tests the functionality of the developed software program using the state values derived from initial testing. The software program for navigation were then transferred to the quad bike for actual system testing. (\textcolor{red}{REFER TO APPENDIX??})

\end{document}